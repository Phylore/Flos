{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
  <h2>ğŸ“¸ Bilder aufnehmen fÃ¼r GerÃ¤t {{ geraet.qrcode }}</h2>

  {% set beschreibungen = ["Produktansicht", "Unten", "Frontal", "Hinten", "Verpackt mit Etikett"] %}
  <div class="row">
    {% for beschreibung in beschreibungen %}
    <div class="col-md-6 mb-4">
      <div class="card shadow-sm">
        <div class="card-header fw-bold">{{ beschreibung }}</div>
        <div class="card-body">
          {% set feldname = beschreibung.lower().replace(" ", "_") %}
          {% set vorhandenes_bild = bilder | selectattr("beschreibung", "equalto", beschreibung) | list | first %}

          {% if vorhandenes_bild %}
            <img src="{{ url_for('static', filename=vorhandenes_bild.pfad) }}" class="img-fluid mb-2 border" alt="Bild: {{ beschreibung }}">
          {% else %}
            <div style="width: 100%; height: 180px; border: 2px dashed #ccc; display: flex; align-items: center; justify-content: center; color: #bbb; margin-bottom: 8px;">
              <span>Kein Bild</span>
            </div>
          {% endif %}

          <form method="POST" enctype="multipart/form-data">
            <input type="hidden" name="feldname" value="{{ feldname }}">
            <input type="file" name="bild" accept="image/*" class="form-control mb-2" required>
            <button class="btn btn-primary w-100" type="submit">ğŸ“¤ Bild hochladen</button>
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <a href="{{ url_for('geraete.geraet_seite', qrcode=geraet.qrcode) }}" class="btn btn-secondary mt-3">ğŸ”™ ZurÃ¼ck zum GerÃ¤t</a>
</div>
{% endblock %}

